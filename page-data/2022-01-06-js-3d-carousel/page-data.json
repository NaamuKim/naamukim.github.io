{
    "componentChunkName": "component---src-templates-post-template-tsx",
    "path": "/2022-01-06-js-3d-carousel/",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h4>이 글은 vanillajs로 만든 3d-carousel 방식을  다룬다.</h4>\n<p><img src=\"/464758a5c7b0d0e0435a030898a61415/carousel.gif\" alt=\"carousel.gif\"></p>\n<p>이런 식으로 원근감이 느껴지는 캐루셀을 만들기 위해서는\n크기를 다르게 하는 방법도 있겠지만 css에</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.carousel-list</span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">transform-style</span><span class=\"token punctuation\">:</span> preserve-3d<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>를 이용하여 전체 이미지 리스트를 3d로 바꿔줄 수 있다.\n그리고 이제 js를 활용하여 버튼 클릭 이벤트 시 회전할 수 있게 해준다.</p>\n<p>일단 prev버튼을 클릭할 시 생기는 이벤트를 정리하면</p>\n<ol>\n<li>center에 있는 이미지와 왼쪽 이미지를 특정한다.</li>\n<li>왼쪽에 있는 이미지를 가운데에 보내주고 가운데에 있는 이미지는 오른쪽으로 보내준다.</li>\n<li>그에 맞게 다른 이미지들도 한칸씩 원주를 따라 돌려준다.</li>\n</ol>\n<p>또 next버튼을 클릭할 시 생기는 이벤트를 정리하면</p>\n<ol>\n<li>center에 있는 이미지와 오른 이미지를 특정한다.</li>\n<li>오른에 있는 이미지를 가운데에 보내주고 가운데에 있는 이미지는 왼쪽으로 보내준다.</li>\n<li>그에 맞게 다른 이미지들도 한칸씩 원주를 따라 돌려준다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onClickPrev</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">const</span> carItem <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".carousel-item\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>carItem<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">const</span> nowItem <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".now\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">const</span> prev <span class=\"token operator\">=</span> carItem<span class=\"token punctuation\">[</span>carItem<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t\t\tcarList<span class=\"token punctuation\">.</span><span class=\"token function\">insertBefore</span><span class=\"token punctuation\">(</span>prev<span class=\"token punctuation\">,</span> carItem<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tnowItem<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"now\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tprev<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"now\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">changeTransform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onClickNext</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">const</span> carItem <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".carousel-item\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>carItem<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">const</span> nowItem <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".now\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">const</span> next <span class=\"token operator\">=</span> nowItem<span class=\"token punctuation\">.</span>nextElementSibling<span class=\"token punctuation\">;</span>\n\t\t\tcarList<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>nowItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tnext<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"now\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">changeTransform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>changeTransform 함수는</p>\n<ul>\n<li>창이 처음 로드 될 때</li>\n<li>prev 버튼이 클릭 될 때</li>\n<li>next 버튼이 클릭 될 때</li>\n<li>이미지를 업로드 할 때</li>\n</ul>\n<p>이렇게 4번 정도 사용하므로 따로 함수로 만들어주었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">changeTransform</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">const</span> items <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".carousel-item\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\titems<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token comment\">//이렇게 사용하면 degree*i가 원주 상에 아이템이 있어야할 각도가 된다.</span>\n\t\t\t<span class=\"token keyword\">const</span> degree <span class=\"token operator\">=</span> <span class=\"token number\">360</span> <span class=\"token operator\">/</span> items<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token comment\">//Y축은 원 가운데에서 높게 솟은 축</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\te<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">rotateY(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>\n\t\t\t\t\ti <span class=\"token operator\">*</span> degree\n\t\t\t\t<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">deg) translateZ(250px) rotateY(-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i <span class=\"token operator\">*</span> degree<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">deg)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//앞을 보게끔 rotate시켜줌</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token comment\">//5개 보다 많을 떄는 보여야하는 것들을 먼저 세팅해주고 안 보이는 것들을 degree*i에 배치시킨다.</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">.</span>length <span class=\"token operator\">>=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\te<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token string\">\"rotateY(0deg) translateZ(250px)\"</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\te<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span>\n\t\t\t\t\t\t<span class=\"token string\">\"rotateY(72deg) translateZ(250px) rotateY(-72deg)\"</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">===</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\te<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span>\n\t\t\t\t\t\t<span class=\"token string\">\"rotateY(144deg) translateZ(250px) rotateY(-144deg) translateX(400px)\"</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">===</span> items<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\te<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span>\n\t\t\t\t\t\t<span class=\"token string\">\"rotateY(216deg) translateZ(250px) rotateY(-216deg) translateX(-400px)\"</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">===</span> items<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\te<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span>\n\t\t\t\t\t\t<span class=\"token string\">\"rotateY(288deg) translateZ(250px) rotateY(-288deg)\"</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\te<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">rotateY(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>\n\t\t\t\t\t\ti <span class=\"token operator\">*</span> degree\n\t\t\t\t\t<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">deg) translateZ(250px) rotateY(-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i <span class=\"token operator\">*</span> degree<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">deg)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>코드를 설명하면 z축은 사용자 눈과 가까워지는 축이므로 z축을 이동시켜 원근감을 조절할 수 있다.\nY축은 우리의 캐루셀이 도는 원주의 중심이 되는 축이다.\n이 원주를 바탕으로 rotateY(ㅁㅁㅁdeg)할 경우 평면인 이미지도 같이 회전하기 때문에 rotateY(-ㅁㅁㅁdeg)로 앞을 바라볼 수 있게 해주었다.\nX축은 화면에 가로방향으로 뻗은 축이어서 이미지가 5개가 넘어가면 5개가 보일 수 있게 세팅해주었다.</p>\n<p>style.transform에서 세 축을 기반하여 회전시키는 것이 생각보다 어려웠다.</p>\n<p>이 글을 보시는 분들이 3d-carousel을 쉽게 구현하길 바란다.</p>","frontmatter":{"title":"vanillaJs를 이용한 3d-carousel","summary":"tranform-style: preserve-3d를 이용하여 원근감을 준 이미지 캐루셀","date":"2022.01.06.","categories":["Design"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAs0lEQVQoz2P4f6uGbMRAE83/blb/vVn971bNP5I136z5f6/u//36/7dr/t+pJUEzyKo7tS+OFT45nP/rWuX3yxX/b9cSq/nvjer/jxsPLI2f3+E7vdFz14Lo/w8a/t6sJqz5382a/7dr/t6sntHstWtB9Ixm7yn1Hv8fEqcZim7X3NyZ+eFs6Z092R/Olv6/U/uPtKh62PDvTu3/Bw3/79aCwo8kzX9vVP+7CSXpm0iI0QwAzokn9sRdXPEAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/8add42706d9936c8c0866ce13efe8b0a/2ee73/vanilla.png","srcSet":"/static/8add42706d9936c8c0866ce13efe8b0a/10d63/vanilla.png 71w,\n/static/8add42706d9936c8c0866ce13efe8b0a/e45ee/vanilla.png 142w,\n/static/8add42706d9936c8c0866ce13efe8b0a/2ee73/vanilla.png 284w","sizes":"(min-width: 284px) 284px, 100vw"},"sources":[{"srcSet":"/static/8add42706d9936c8c0866ce13efe8b0a/1d6d0/vanilla.webp 71w,\n/static/8add42706d9936c8c0866ce13efe8b0a/147bb/vanilla.webp 142w,\n/static/8add42706d9936c8c0866ce13efe8b0a/033a8/vanilla.webp 284w","type":"image/webp","sizes":"(min-width: 284px) 284px, 100vw"}]},"width":284,"height":177}},"publicURL":"/static/8add42706d9936c8c0866ce13efe8b0a/vanilla.png"}}}}]}},"pageContext":{"slug":"/2022-01-06-js-3d-carousel/"}},
    "staticQueryHashes": []}