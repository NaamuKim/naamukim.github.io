{
    "componentChunkName": "component---src-templates-post-template-tsx",
    "path": "/2022-01-10-efficient-code-by-js/",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<p>이 글은 클린코드 서적을 기반으로 js에서 좋은 코드를 짜기 위한 생각을 어떻게 할 수 있을 지를 다룬다.</p>\n<p>프로젝트와 공부를 진행하며 수정과 삭제, 추가를 반복해나가겠다.</p>\n<h3>1. 이미지 소스가 바뀌는 부분들을 객체로 묶어놓는다.</h3>\n<p>이미지 파일의 경로를 입력해 놓는 것은 굉장히 길다. 몇번 안 쓰이더라도 같은 컴포넌트 안에서 이미지가 바뀌는 부분은 객체로 저장해놓고 이름을 지정해 사용과 리팩터링에 유용하다.</p>\n<p>이미지가 바뀌거나 내용이 달라졌을 때 해당 객체만 수정하여 리팩터링한다.</p>\n<p>예제 코드</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> starImageSourceMap <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  empty<span class=\"token operator\">:</span> <span class=\"token string\">'./src/images/icon_empty_star.png'</span><span class=\"token punctuation\">,</span>\n  half<span class=\"token operator\">:</span> <span class=\"token string\">'./src/images/icon_half_star.png'</span><span class=\"token punctuation\">,</span>\n  full<span class=\"token operator\">:</span> <span class=\"token string\">'./src/images/icon_star.png'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>2. 변수를 만들 때 Object Destructing(비구조화 할당)이 가능한가 생각하자</h3>\n<p>js와 다른 언어가 크게 무슨 점이 다르냐를 생각해보면 js는 브라우저에서 실행되기 때문에 DOM을 움직일 수 있고 이에 따라 DOM 객체들을 다룰 때가 많다.</p>\n<p>나 같은 경우엔 event 객체를 다룰 때 정말 많은 변수들을 선언하고는 했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> newTarget <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>target\n<span class=\"token keyword\">const</span> currentUserPoint <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>offsetX\n<span class=\"token keyword\">const</span> targetDatasetPoint <span class=\"token operator\">=</span> newTarget<span class=\"token punctuation\">.</span>point</code></pre></div>\n<p>이런 코드의 문제는 코드가 길어질뿐만아니라 이름을 알고있어야하는 변수가 너무 많아진다.</p>\n<p>또 변수 이름 짓기를 고민해야하는데 드는 비용도 적지 않을 것이다.</p>\n<p>이럴 때 “아 event랑 target객체였지?” 라는 생각을 기반으로 비구조화 할당하면 된다.</p>\n<p>예제코드</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> target<span class=\"token punctuation\">,</span> offsetX<span class=\"token operator\">:</span> currentUserPoint <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> event\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> point <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>dataset</code></pre></div>\n<p>이렇게 줄이고 나면 앞으로 target, offsetX, point를 변수로 이용가능하다.</p>\n<p>비구조화 할당 시 기본값 설정</p>\n<p>비구조화 할당시 기본값을 부여하고 싶다면 대입연산자를 사용하면 된다.\\</p>\n<p>예제코드</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> drawableLimitIndex <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> isOverHalf <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> payload</code></pre></div>\n<p>이렇게 코드를 사용할 경우 payload에서 값이 부여되지 않는다면 직접 설정한 기본값이 들어갈 것이다.</p>\n<p>이는 값을 줄 경우와 안 줄경우를 나누어 함수 재사용도 용이하게 만들어 줄 수 있다.</p>\n<p>비구조화 할당시 이름 바꾸기</p>\n<p>위 코드를 다시 가져와보자</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> target<span class=\"token punctuation\">,</span> offsetX<span class=\"token operator\">:</span> currentUserPoint <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> event</code></pre></div>\n<p>offsetX: currentUserPoint를 살펴보면 event.offsetX를 currentUserPoint라는 변수로 사용하겠다는 것이다.</p>\n<p>이처럼 객체에서 여러 변수를 쓸 때 그 중 일부의 변수명을 쉽게 바꿔줄 수 있다.</p>\n<p>이러한 방식으로 변수를 구분해줄 수 있다.</p>\n<h3>3. 조건문을 삼항연산자로 바꿀 방법이 없는 지 생각하자.</h3>\n<p>삼항연산자는 if문을 짧게 만들어준다.</p>\n<p>단 else if가 없는 if문에 한해서</p>\n<p>isLoggedIn같은 boolean타입 변수를 사용할 때는 if문을 지양할 필요가 있다.</p>\n<p>회원에게 더 저렴한 가격을 제공하는 서비스라고 가정해보자</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isLoggedIn<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token string\">'$1.00'</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token string\">'$2000.00'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>잘 보이는 코드 사용을 위해 4줄을 사용해야한다.\n이제 삼항연산자로 줄여보자</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">isLoggedIn <span class=\"token operator\">?</span> <span class=\"token string\">'$1.00'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'$2000.00'</span></code></pre></div>\n<p>삼항연산자를 사용할 수 있는 지 생각하는 것만으로 꽤 많은 코드 단축이 될 수 있다.</p>\n<h3>4. this 바인딩 오류 해결을 할 때 bind를 이용하자.</h3>\n<p>this binding의 오류를 잡기 위해 사용할 수 있는 방법이 많이 있을텐데</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Zoo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">animals</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>animals <span class=\"token operator\">=</span> animals\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">meowing</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>animals<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">animal</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        animal<span class=\"token punctuation\">.</span><span class=\"token function\">meowing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> kinderZoo <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Zoo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n\tname<span class=\"token operator\">:</span> <span class=\"token string\">'cat'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token function-variable function\">meowing</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'m e o w'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\tkinderZoo<span class=\"token punctuation\">.</span><span class=\"token function\">meowing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이를 실행 시킬 시에 오류가 발생한다. 왜냐면 setTimeout안에 있는 this는 zoo를 가르키지 않는다.</p>\n<p>이를 해결할 때 this를 할당해서 쓰는 방법이 있다.\n그리고 bind를 이용하는 방법이 있는데 bind를 쉽게 이해하면 너가 사용해야하는 this는 이거야라고 알려주는 것이다.</p>\n<p>예제 코드</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Zoo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">animals</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>animals <span class=\"token operator\">=</span> animals\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">meowing</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>animals<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">animal</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          animal<span class=\"token punctuation\">.</span><span class=\"token function\">meowing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> kinderZoo <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Zoo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'cat'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">meowing</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'m e o w'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nkinderZoo<span class=\"token punctuation\">.</span><span class=\"token function\">meowing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>이런식으로 해결이 가능하다.\n상위함수에서 this를 다른 변수에 저장해 주는 방식도 있겠지만\nbind를 사용했을 때 장점은</p>\n<ol>\n<li>함수만 봐도 무슨 뜻인 지 알 수 있다.</li>\n<li>변수가 많아지지 않는다.</li>\n<li>인수는 그대로 사용하고 this만 고정시킬 수 있다.</li>\n</ol>\n<p>이런 장점들을 생각해보면 this바인딩 오류 생길 때 아 이걸 this로 써야지 하면서 bind뒤에 쏙 넣어주면 읽기 좋을 것이다.</p>","frontmatter":{"title":"js로 좋은 코드 짜는 것에 대해","summary":"js clean code tips","date":"2022.01.10.","categories":["js"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAs0lEQVQoz2P4f6uGbMRAE83/blb/vVn971bNP5I136z5f6/u//36/7dr/t+pJUEzyKo7tS+OFT45nP/rWuX3yxX/b9cSq/nvjer/jxsPLI2f3+E7vdFz14Lo/w8a/t6sJqz5382a/7dr/t6sntHstWtB9Ixm7yn1Hv8fEqcZim7X3NyZ+eFs6Z092R/Olv6/U/uPtKh62PDvTu3/Bw3/79aCwo8kzX9vVP+7CSXpm0iI0QwAzokn9sRdXPEAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/8add42706d9936c8c0866ce13efe8b0a/2ee73/vanilla.png","srcSet":"/static/8add42706d9936c8c0866ce13efe8b0a/10d63/vanilla.png 71w,\n/static/8add42706d9936c8c0866ce13efe8b0a/e45ee/vanilla.png 142w,\n/static/8add42706d9936c8c0866ce13efe8b0a/2ee73/vanilla.png 284w","sizes":"(min-width: 284px) 284px, 100vw"},"sources":[{"srcSet":"/static/8add42706d9936c8c0866ce13efe8b0a/1d6d0/vanilla.webp 71w,\n/static/8add42706d9936c8c0866ce13efe8b0a/147bb/vanilla.webp 142w,\n/static/8add42706d9936c8c0866ce13efe8b0a/033a8/vanilla.webp 284w","type":"image/webp","sizes":"(min-width: 284px) 284px, 100vw"}]},"width":284,"height":177}},"publicURL":"/static/8add42706d9936c8c0866ce13efe8b0a/vanilla.png"}}}}]}},"pageContext":{"slug":"/2022-01-10-efficient-code-by-js/"}},
    "staticQueryHashes": []}